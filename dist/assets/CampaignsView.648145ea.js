import{G as L,f as j}from"./mdi.f693eecd.js";import{_ as z}from"./NavBar.59cebfca.js";import{_ as M}from"./CardBox.173aa79f.js";import{_ as E}from"./CardBoxWidget.2ba28216.js";import{_ as h}from"./BaseButton.674e3c10.js";import{_ as G}from"./LayoutAuthenticated.0a6b42a9.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";import{C as O}from"./ChallengeController.9b8120ad.js";import{a as p,i as R,K as T,u as q,G as K,o as c,c as I,w as d,b as t,g as o,e as y,f as v,h as b,F as P,z as W,t as B,N as Y,O as H}from"./index.ec32f494.js";import{L as J}from"./LoadingSpinner.889a7260.js";import{u as Q}from"./ServerCall.7354e88a.js";import{S as X}from"./SponsorController.4f392fe6.js";import{U as Z}from"./UserController.5f62944b.js";import{_ as ee}from"./FormField.c48798ca.js";import{_ as oe}from"./FormControl.280616cf.js";import"./BaseIcon.dec28c75.js";import"./PillTag.9c62ac72.js";import"./colors.dcae2bc6.js";import"./LoginController.9d60cd79.js";const V=_=>(Y("data-v-7d377ad2"),_=_(),H(),_),se={class:"flex justify-between pb-5"},te={class:"flex gap-2 items-center"},ae=V(()=>o("p",{class:"lg:text-xl text-lg"},"Campaings",-1)),le={class:"flex gap-2 items-center edit-search"},ne={key:0,class:"grid min-w-[50%] gap-6 mb-6"},ie={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6"},re={class:"flex justify-between mb-2"},ce={class:"font-extrabold text-lg"},de={class:"flex grid-cols-3"},ue=["src"],me={class:"text-sm font-light col-span-2"},fe={class:"flex flex-col"},pe=V(()=>o("div",{class:"flex flex-row justify-around"},null,-1)),_e={class:"flex justify-end gap-3"},ge={key:2,class:"flex align-center justify-center h-screen"},he={__name:"CampaignsView",setup(_){const u=Q(),U="https://chgsdev.shareity.com/",r=p([]),x=p([]),i=p(Boolean),w=p({}),C=p(""),$=R(()=>N());function N(){return r.value.filter(s=>s.name.includes(C.value))}T(async()=>{i.value=!0;const s=await O.getAll(),l=u.getUserRole(),m=u.getUserNickname();if(l=="admin")r.value=s,i.value=!1;else if(l=="sponsor"&&await X.getByUserId(parseInt(u.getUserId())).then(e=>{x.value=e;let a=[];s.forEach(n=>{var f;n.id===361&&(console.log("challenge.sponsor",n.sponsors),console.log("sponsorData.value",x.value)),(n.sponsors.reduce((g,D)=>{var k;return g||((k=D.sponsor)==null?void 0:k.id)==x.value.id},!1)||((f=n.user)==null?void 0:f.id)==parseInt(u.getUserId()))&&a.push(n)}),r.value=a,i.value=!1}).catch(e=>{console.log("error",e)}),l=="cause"){w.value=await Z.userAction(m);let e=[];s.forEach(a=>{var n,f,g;console.log("organization",(n=a.organization)==null?void 0:n.id),(((f=a.organization)==null?void 0:f.id)==w.value.organization.id||((g=a.user)==null?void 0:g.id)==parseInt(u.getUserId()))&&e.push(a)}),r.value=e,i.value=!1}});const A=q();function S(s,l,m){localStorage.setItem("shareMessage",l),A.push({name:m,query:{id:s}})}return(s,l)=>{const m=K("CardBoxComponentTitle");return c(),I(G,null,{default:d(()=>[t(z,null,{default:d(()=>[o("div",se,[o("div",te,[t(h,{to:"/dashboard",icon:y(L),color:"info","rounded-full":"",small:""},null,8,["icon"]),ae]),o("div",le,[t(ee,null,{default:d(()=>[t(oe,{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=e=>C.value=e),icon:s.mdiAccountBox,value:"Search"},null,8,["modelValue","icon"])]),_:1}),t(h,{class:"mr-5",label:"Add Challenge",color:"info",icon:y(j),to:"/create-challenge"},null,8,["icon"])])]),!i.value&&r.value.length==0?(c(),v("div",ne,[t(E,{icon:s.mdiCartOutline,label:"It seems that there are no campaings related to you yet :(",content:'You can create a challenge by clicking on the "+ Add Challenge" button!!'},null,8,["icon"])])):b("",!0),!i.value&&r.value.length>0?(c(),v("div",ie,[(c(!0),v(P,null,W($.value,e=>(c(),I(M,{key:e.id},{footer:d(()=>[o("div",fe,[pe,o("div",_e,[t(h,{class:"mt-3 text-lg font-bold",small:"",label:"Show Info",color:"success",onClick:a=>S(e.id,e.shareMessageShort,"challenge-info")},null,8,["onClick"]),t(h,{class:"mt-3 text-lg font-bold italic",small:"",label:"Go Live",color:"info",onClick:a=>S(e.id,e.shareMessageShort,"presentation")},null,8,["onClick"])])])]),default:d(()=>[t(m,{title:"With title & icon"},{default:d(()=>[o("div",re,[o("p",ce,B(e.name),1)])]),_:2},1024),o("div",de,[o("img",{class:"col-span-1 mr-3",src:y(U)+e.badge,style:{height:"64px",width:"64px"}},null,8,ue),o("p",me,B(e.description),1)])]),_:2},1024))),128))])):b("",!0),i.value?(c(),v("div",ge,[t(J)])):b("",!0)]),_:1})]),_:1})}}},Me=F(he,[["__scopeId","data-v-7d377ad2"]]);export{Me as default};
