import{G as D}from"./mdi.f693eecd.js";import{_ as H}from"./NavBar.59cebfca.js";import{_ as N}from"./CardBox.173aa79f.js";import{_ as P}from"./LayoutAuthenticated.0a6b42a9.js";import{_ as A}from"./BaseButton.674e3c10.js";import{U as I}from"./UserController.5f62944b.js";import{u as M}from"./ServerCall.7354e88a.js";import{U as E}from"./utilityMethods.670eb443.js";import{a as s,i as _,M as F,G as g,o as d,c as G,w as n,b as i,g as e,e as x,f as p,F as h,z as k,h as j,I as C,t as m}from"./index.ec32f494.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./BaseIcon.dec28c75.js";import"./colors.dcae2bc6.js";import"./LoginController.9d60cd79.js";const z={class:"flex justify-between pb-5"},T={class:"flex gap-2 items-center"},q=e("p",{class:"lg:text-xl text-lg"},"Credit History",-1),J={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},K={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},O={class:"table-auto w-full text-sm text-left text-gray-500 dark:text-gray-400"},Q=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Date"),e("th",{scope:"col",class:"px-6 py-3"},"Amount"),e("th",{scope:"col",class:"px-6 py-3"},"Credits obtained"),e("th",{scope:"col",class:"px-6 py-3"},"Card type")])],-1),R={class:"px-6 py-4"},W={class:"px-6 py-4"},X={class:"px-6 py-4"},Y={class:"px-6 py-4"},Z={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},ee=e("p",{class:"text-lg italic font-bold"},[C("User has been "),e("b",null,"Deleted")],-1),ge={__name:"CreditsHistoryView",setup(te){const c=s([]);s({}),s({});const f=s(!1);s(0),s(!1);const v=s(10),y=s(1),b=s([]),w=s({field:"",order:1});s(!1),s(!1),s(!1),s({});const V=M(),U=_(()=>{const o=y.value*v.value;return $.value.slice(o,o+v.value)}),$=_(()=>{if(c.value.page){const{field:o,order:t}=w.value,u=[...c.value.page];return o==="name"?u.sort((l,r)=>l.name&&r.name?l.name.toString().localeCompare(r.name)*t:0):o==="status"&&u.sort((l,r)=>l.status&&r.status?l.status.toString().localeCompare(r.status)*t:0),u}return[]}),B=_(()=>{c.value.page&&Math.ceil(c.value.page.length/v.value)-1}),L=_(()=>{const o=[];for(let t=0;t<B.value;t++)o.push(t);return o});return F(()=>{let o=V.getUserId();I.getCreditHistory(o,1e3).then(t=>{c.value=t,console.log("\u{1F69A}",c.value.page)})}),(o,t)=>{const u=g("v-pagination"),l=g("BaseLevel"),r=g("v-btn"),S=g("v-snackbar");return d(),G(P,null,{default:n(()=>[i(H,null,{default:n(()=>[e("div",z,[e("div",T,[i(A,{to:"/credits",icon:x(D),color:"info","rounded-full":"",small:""},null,8,["icon"]),q])]),i(N,{class:"mb-6 m","has-table":""},{default:n(()=>[e("div",null,[b.value.length?(d(),p("div",J,[(d(!0),p(h,null,k(b.value,a=>(d(),p("span",{key:a.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},m(a.name),1))),128))])):j("",!0),e("div",K,[e("table",O,[Q,e("tbody",null,[(d(!0),p(h,null,k(U.value,a=>(d(),p("tr",{key:a.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[e("td",R,m(x(E).formatDate(a.createAt)),1),e("td",W,m(`$ ${a.amount||0}`),1),e("td",X,m(a.credit),1),e("td",Y,m(a.type),1)]))),128))])])]),e("div",Z,[i(l,null,{default:n(()=>[i(u,{length:L.value.length,color:"black","total-visible":10,modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=a=>y.value=a)},null,8,["length","modelValue"])]),_:1})])])]),_:1})]),_:1}),i(S,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=a=>f.value=a),timeout:3e3,color:"red"},{actions:n(()=>[i(r,{color:"white",variant:"text",onClick:t[1]||(t[1]=a=>f.value=!1)},{default:n(()=>[C(" Close ")]),_:1})]),default:n(()=>[ee]),_:1},8,["modelValue"])]),_:1})}}};export{ge as default};
