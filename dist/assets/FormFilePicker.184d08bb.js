import{Q as x}from"./mdi.f693eecd.js";import{_ as F}from"./BaseButton.674e3c10.js";import{a as t,i as f,U as S,o as n,f as s,g as i,b as I,n as m,t as w,h as C,F as z}from"./index.ec32f494.js";const B={class:"flex items-stretch justify-start relative"},U={class:"inline-flex"},N=["accept"],_={key:0,class:"px-4 py-2 bg-gray-100 dark:bg-slate-800 border-gray-200 dark:border-slate-700 border rounded-r"},j={class:"text-ellipsis line-clamp-1"},A=["src"],D=["src"],O={__name:"FormFilePicker",props:{modelValue:{type:[Object,File,Array],default:null},mediaClass:{type:String,default:""},label:{type:String,default:null},icon:{type:String,default:x},accept:{type:String,default:null},color:{type:String,default:"info"},isRoundIcon:Boolean},emits:["update:modelValue"],setup(e,{emit:b}){const c=e,v=t(null),l=t(c.modelValue),p=f(()=>{if(!l.value)return!1;if(l.value instanceof File){const a=l.value.name.split(".").pop();return a==="mp4"||a==="mov"}else if(l.value instanceof String||l.value instanceof URL){const a=l.value.split(".").pop();return a==="mp4"||a==="mov"}}),y=f(()=>!c.isRoundIcon&&l.value),R=f(()=>c.modelValue);S(R,a=>{l.value=a,a||(v.value.input.value=null)});const g=t(null),h=t(null),V=a=>{const o=a.target.files||a.dataTransfer.files;l.value=o[0],b("update:modelValue",o[0]);const u=new FileReader;p.value?u.onload=function(r){const d=r.target.result,k=h.value;k.src=d}:u.onload=function(r){const d=g.value;d.src=r.target.result},u.readAsDataURL(o[0])};return(a,o)=>(n(),s(z,null,[i("div",B,[i("label",U,[I(F,{as:"a",class:m({"w-12 h-12":e.isRoundIcon,"rounded-r-none":y.value}),"icon-size":e.isRoundIcon?24:void 0,label:e.isRoundIcon?null:e.label,icon:e.icon,color:e.color,"rounded-full":e.isRoundIcon},null,8,["class","icon-size","label","icon","color","rounded-full"]),i("input",{ref_key:"root",ref:v,type:"file",class:"absolute top-0 left-0 w-full h-full opacity-0 outline-none cursor-pointer -z-1",accept:e.accept,onInput:V},null,40,N)]),y.value?(n(),s("div",_,[i("span",j,w(l.value.name),1)])):C("",!0)]),p.value?(n(),s("video",{key:1,ref_key:"videoRef",ref:h,src:e.modelValue,class:m(l.value?e.mediaClass:""),autoplay:"",controls:""},null,10,D)):(n(),s("img",{key:0,ref_key:"imagenRef",ref:g,src:e.modelValue,class:m(l.value?e.mediaClass:"")},null,10,A))],64))}};export{O as _};
