import{a as h,r as g,P as N,M as O,G as V,o as y,c as q,w as a,b as o,g as r,e as i,t as w,d as z,Q as A,p as B,J as F,f as D,h as M,I as P}from"./index.ec32f494.js";import{G as J,c as R,m as j,R as v}from"./mdi.f693eecd.js";import{u as G}from"./ServerCall.7354e88a.js";import{_ as I}from"./NavBar.59cebfca.js";import{_ as Q}from"./CardBox.173aa79f.js";import{_ as d}from"./FormField.c48798ca.js";import{_}from"./FormControl.280616cf.js";import{_ as T}from"./FormFilePicker.184d08bb.js";import{_ as k}from"./BaseButton.674e3c10.js";import{_ as H}from"./BaseButtons.2d2440b4.js";import{_ as K}from"./LayoutAuthenticated.0a6b42a9.js";/* empty css             */import{O as C}from"./OrganizationController.cf89c48d.js";import{U as W}from"./utilityMethods.670eb443.js";import{s as X}from"./vue-color-kit.esm-bundler.e50d71a7.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./BaseIcon.dec28c75.js";import"./colors.dcae2bc6.js";import"./LoginController.9d60cd79.js";const Y={class:"flex justify-between pb-5"},Z={class:"flex gap-2 items-center"},ee={class:"lg:text-xl text-lg"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},se={class:"flex flex-row"},ae={style:{position:"relative"}},le={style:{position:"absolute"}},te={class:"w-24 h-24"},ne=["src"],re={class:"text-lg italic font-bold"},Le={__name:"CreateCauseView",setup(ie){const x=G().getUserRole(),b="https://chgsdev.shareity.com/",p=h(),m=h(!1),n=g({showcolorpicker:!1,color:"#59c7f9",suckerCanvas:null,suckerArea:[],isSucking:!1}),e=g({name:"",personEmail:"",personFirstname:"",personLastname:"",logo:"",description:"",color:n.color}),f=g({color:"green",message:""}),c=N(),S=c.query.id?"Edit":"Create",U=t=>{n.color=t.hex},E=t=>{p.value=t};O(()=>{C.getById(c.query.id).then(t=>{e.name=t.name,e.personEmail=t.personEmail,e.personLastname=t.personLastname,p.value=b+t.logo})},[c.query.id]);const L=async()=>{let t=await W.verifyMedia(p.value,"organization");if(c.query.id){e.logo=t;let s={name:e.name,personEmail:e.personEmail,personFirstname:e.personFirstname,personLastname:e.personLastname,logo:e.logo,description:e.description,color:e.color};C.update(c.query.id,s).then(u=>{u.statusCode==200?(m.value=!0,f.message="Cause Updated",x=="cause"?c.push({name:"dashboard"}):c.push({name:"causes"})):(m.value=!0,f.message=u.message[0])})}else{e.logo=t;let s=JSON.parse(JSON.stringify(e));C.create(s).then(u=>{u.statusCode==200?(m.value=!0,f.message="Cause Created"):(m.value=!0,f.message=u.message[0])})}};return(t,s)=>{const u=V("v-btn"),$=V("v-snackbar");return y(),q(K,null,{default:a(()=>[o(I,null,{default:a(()=>[r("div",Y,[r("div",Z,[o(k,{to:"/causes",icon:i(J),color:"info","rounded-full":"",small:""},null,8,["icon"]),r("p",ee,w(i(S))+" Cause",1)])]),o(Q,{"is-form":"",class:"col-span-3",onSubmit:z(L,["prevent"])},{footer:a(()=>[o(H,{class:"justify-end"},{default:a(()=>[o(k,{color:"info",type:"submit",label:"Save"})]),_:1})]),default:a(()=>[r("div",oe,[o(d,{label:"Organization Name"},{default:a(()=>[o(_,{modelValue:e.name,"onUpdate:modelValue":s[0]||(s[0]=l=>e.name=l),icon:i(R),required:""},null,8,["modelValue","icon"])]),_:1}),o(d,{label:"Contact Person Email"},{default:a(()=>[o(_,{modelValue:e.personEmail,"onUpdate:modelValue":s[1]||(s[1]=l=>e.personEmail=l),icon:i(j),type:"email",name:"email",required:"",autocomplete:"email",label:"data"},null,8,["modelValue","icon"])]),_:1}),o(d,{label:"Contact Person First Name"},{default:a(()=>[o(_,{modelValue:e.personFirstname,"onUpdate:modelValue":s[2]||(s[2]=l=>e.personFirstname=l),icon:i(v)},null,8,["modelValue","icon"])]),_:1}),o(d,{label:"Contact Person Last Name"},{default:a(()=>[o(_,{modelValue:e.personLastname,"onUpdate:modelValue":s[3]||(s[3]=l=>e.personLastname=l),icon:i(v)},null,8,["modelValue","icon"])]),_:1}),o(d,{label:"Organization Description"},{default:a(()=>[o(_,{modelValue:e.description,"onUpdate:modelValue":s[4]||(s[4]=l=>e.description=l),icon:i(v)},null,8,["modelValue","icon"])]),_:1}),o(d,{label:"Organization Color"},{default:a(()=>[r("div",se,[o(k,{onClick:s[5]||(s[5]=l=>n.showcolorpicker=!n.showcolorpicker),class:"text-black w-full",label:"Select Color"}),r("div",{class:"ml-2 h-12 w-24 rounded-md",style:A({background:n.color})},null,4)]),r("div",ae,[B(r("div",le,[o(i(X),{theme:"light",color:n.color,"sucker-hide":!1,"sucker-canvas":n.suckerCanvas,"sucker-area":n.suckerArea,onChangeColor:U,onOpenSucker:n.openSucker},null,8,["color","sucker-canvas","sucker-area","onOpenSucker"])],512),[[F,n.showcolorpicker]])])]),_:1}),o(d,{label:"Select Cause Logo"},{default:a(()=>[o(T,{modelValue:p.value,"onUpdate:modelValue":E,label:"Upload",mediaClass:"h-52 w-52"},null,8,["modelValue"])]),_:1}),r("div",te,[p.value!=null?(y(),D("img",{key:0,src:i(b)+p.value,alt:""},null,8,ne)):M("",!0)])])]),_:1},8,["onSubmit"]),o($,{modelValue:m.value,"onUpdate:modelValue":s[7]||(s[7]=l=>m.value=l),timeout:3e3,color:f.color},{actions:a(()=>[o(u,{color:"white",variant:"text",onClick:s[6]||(s[6]=l=>m.value=!1)},{default:a(()=>[P(" Close ")]),_:1})]),default:a(()=>[r("p",re,w(f.message),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1})}}};export{Le as default};
